

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>DPAA2 Switch driver &mdash; The Linux Kernel  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="The Gianfar Ethernet Driver" href="../gianfar.html" />
    <link rel="prev" title="DPAA2 MAC / PHY support" href="mac-phy-support.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.16.0-rc1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../devicetree/index.html">Open Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Linux Networking Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../netdev-FAQ.html">netdev FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../af_xdp.html">AF_XDP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../bareudp.html">Bare UDP Tunnelling Module Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../batman-adv.html">batman-adv</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../can.html">SocketCAN - Controller Area Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../can_ucan_protocol.html">The UCAN Protocol</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">Hardware Device Drivers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../appletalk/index.html">AppleTalk Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../atm/index.html">Asynchronous Transfer Mode (ATM) Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../cable/index.html">Cable Modem Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../cellular/index.html">Cellular Modem Device Drivers</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">Ethernet Device Drivers</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../3com/3c509.html">Linux and the 3Com EtherLink III Series Ethercards (driver v1.18c and higher)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../3com/vortex.html">3Com Vortex device driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../amazon/ena.html">Linux kernel driver for Elastic Network Adapter (ENA) family</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../altera/altera_tse.html">Altera Triple-Speed Ethernet MAC driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../aquantia/atlantic.html">Marvell(Aquantia) AQtion Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../chelsio/cxgb.html">Chelsio N210 10Gb Ethernet Network Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cirrus/cs89x0.html">Cirrus Logic LAN CS8900/CS8920 Ethernet Adapters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dlink/dl2k.html">D-Link DL2000-based Gigabit Ethernet Adapter Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../davicom/dm9000.html">DM9000 Network driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dec/de4x5.html">DEC EtherWORKS Ethernet De4x5 cards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../dec/dmfe.html">Davicom DM9102(A)/DM9132/DM9801 fast ethernet driver for Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpaa.html">The QorIQ DPAA Ethernet Driver</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">DPAA2 Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gianfar.html">The Gianfar Ethernet Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../google/gve.html">Linux kernel driver for Compute Engine Virtual Ethernet (gve):</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../huawei/hinic.html">Linux Kernel Driver for Huawei Intelligent NIC(HiNIC) family</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/e100.html">Linux Base Driver for the Intel(R) PRO/100 Family of Adapters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/e1000.html">Linux Base Driver for Intel(R) Ethernet Network Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/e1000e.html">Linux Driver for Intel(R) Ethernet Network Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/fm10k.html">Linux Base Driver for Intel(R) Ethernet Multi-host Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/igb.html">Linux Base Driver for Intel(R) Ethernet Network Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/igbvf.html">Linux Base Virtual Function Driver for Intel(R) 1G Ethernet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/ixgb.html">Linux Base Driver for 10 Gigabit Intel(R) Ethernet Network Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/ixgbe.html">Linux Base Driver for the Intel(R) Ethernet 10 Gigabit PCI Express Adapters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/ixgbevf.html">Linux Base Virtual Function Driver for Intel(R) 10G Ethernet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/i40e.html">Linux Base Driver for the Intel(R) Ethernet Controller 700 Series</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/iavf.html">Linux Base Driver for Intel(R) Ethernet Adaptive Virtual Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../intel/ice.html">Linux Base Driver for the Intel(R) Ethernet Controller 800 Series</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../marvell/octeontx2.html">Marvell OcteonTx2 RVU Kernel Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mellanox/mlx5.html">Mellanox ConnectX(R) mlx5 core VPI Network Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../microsoft/netvsc.html">Hyper-V network driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../neterion/s2io.html">Neterion’s (Formerly S2io) Xframe I/II PCI-X 10GbE driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../neterion/vxge.html">Neterion’s (Formerly S2io) X3100 Series 10GbE PCIe Server Adapter Linux driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../netronome/nfp.html">Netronome Flow Processor (NFP) Kernel Drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pensando/ionic.html">Linux Driver for the Pensando(R) Ethernet adapter family</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../smsc/smc9.html">SMC 9xxxx Driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../stmicro/stmmac.html">Linux Driver for the Synopsys(R) Ethernet Controllers “stmmac”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ti/cpsw.html">Texas Instruments CPSW ethernet driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ti/cpsw_switchdev.html">Texas Instruments CPSW switchdev based ethernet driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ti/am65_nuss_cpsw_switchdev.html">Texas Instruments K3 AM65 CPSW NUSS switchdev based ethernet driver</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ti/tlan.html">TLAN driver for Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../toshiba/spider_net.html">The Spidernet Device Driver</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../fddi/index.html">Fiber Distributed Data Interface (FDDI) Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../hamradio/index.html">Amateur Radio Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../qlogic/index.html">QLogic QLGE Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../wan/index.html">Classic WAN Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../wifi/index.html">Wi-Fi Device Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../wwan/index.html">WWAN Device Drivers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dsa/index.html">Distributed Switch Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../devlink/index.html">Linux Devlink Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../caif/index.html">CAIF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ethtool-netlink.html">Netlink interface for ethtool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ieee802154.html">IEEE 802.15.4 Developer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../j1939.html">J1939 Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kapi.html">Linux Networking and Network Devices APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../msg_zerocopy.html">MSG_ZEROCOPY</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../failover.html">FAILOVER</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../net_dim.html">Net DIM - Generic Network Dynamic Interrupt Moderation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../net_failover.html">NET_FAILOVER</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../page_pool.html">Page Pool API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../phy.html">PHY Abstraction Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sfp-phylink.html">phylink</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../alias.html">IP-Aliasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../bridge.html">Ethernet Bridging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../snmp_counter.html">SNMP counter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../checksum-offloads.html">Checksum Offloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../segmentation-offloads.html">Segmentation Offloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../scaling.html">Scaling in the Linux Networking Stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tls.html">Kernel TLS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tls-offload.html">Kernel TLS offload</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../nfc.html">Linux NFC subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../6lowpan.html">Netdev private dataroom for 6lowpan interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../6pack.html">6pack Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../arcnet-hardware.html">ARCnet Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../arcnet.html">ARCnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../atm.html">ATM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ax25.html">AX.25</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../bonding.html">Linux Ethernet Bonding Driver HOWTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../cdc_mbim.html">cdc_mbim - Driver for CDC MBIM Mobile Broadband modems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dccp.html">DCCP protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dctcp.html">DCTCP (DataCenter TCP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../decnet.html">Linux DECnet Networking Layer Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dns_resolver.html">DNS Resolver Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../driver.html">Softnet Driver Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../eql.html">EQL Driver: Serial IP Load Balancing HOWTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../fib_trie.html">LC-trie implementation notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../filter.html">Linux Socket Filtering aka Berkeley Packet Filter (BPF)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../generic-hdlc.html">Generic HDLC layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../generic_netlink.html">Generic Netlink</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../gen_stats.html">Generic networking statistics for netlink users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../gtp.html">The Linux kernel GTP tunneling module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ila.html">Identifier Locator Addressing (ILA)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ioam6-sysctl.html">IOAM6 Sysfs variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ipddp.html">AppleTalk-IP Decapsulation and AppleTalk-IP Encapsulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ip_dynaddr.html">IP dynamic address hack-port v0.03</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ipsec.html">IPsec</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ip-sysctl.html">IP Sysctl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ipv6.html">IPv6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ipvlan.html">IPVLAN Driver HOWTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ipvs-sysctl.html">IPvs-sysctl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../kcm.html">Kernel Connection Multiplexor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../l2tp.html">L2TP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../lapb-module.html">The Linux LAPB Module Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../mac80211-injection.html">How to use packet injection with mac80211</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../mctp.html">Management Component Transport Protocol (MCTP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../mpls-sysctl.html">MPLS Sysfs variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../mptcp-sysctl.html">MPTCP Sysfs variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../multiqueue.html">HOWTO for multiqueue network device support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../netconsole.html">Netconsole</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../netdev-features.html">Netdev features mess and how to get out from it alive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../netdevices.html">Network Devices, the Kernel, and You!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../netfilter-sysctl.html">Netfilter Sysfs variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../netif-msg.html">NETIF Msg Level</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../nexthop-group-resilient.html">Resilient Next-hop Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../nf_conntrack-sysctl.html">Netfilter Conntrack Sysfs variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../nf_flowtable.html">Netfilter’s flowtable infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../openvswitch.html">Open vSwitch datapath developer documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../operstates.html">Operational States</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../packet_mmap.html">Packet MMAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../phonet.html">Linux Phonet protocol family</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pktgen.html">HOWTO for the linux packet generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../plip.html">PLIP: The Parallel Line Internet Protocol Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ppp_generic.html">PPP Generic Driver and Channel Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../proc_net_tcp.html">The proc/net/tcp and proc/net/tcp6 variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../radiotap-headers.html">How to use radiotap headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../rds.html">RDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../regulatory.html">Linux wireless regulatory documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../rxrpc.html">RxRPC Network Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../rxrpc.html#socket-options">SOCKET OPTIONS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../rxrpc.html#security">SECURITY</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../rxrpc.html#example-client-usage">EXAMPLE CLIENT USAGE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sctp.html">Linux Kernel SCTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../secid.html">LSM/SeLinux secid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../seg6-sysctl.html">Seg6 Sysfs variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../statistics.html">Interface statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../strparser.html">Stream Parser (strparser)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../switchdev.html">Ethernet switch device driver model (switchdev)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../sysfs-tagging.html">Sysfs tagging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tc-actions-env-rules.html">TC Actions - Environmental Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tcp-thin.html">Thin-streams and TCP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../team.html">Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../timestamping.html">Timestamping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tipc.html">Linux Kernel TIPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tproxy.html">Transparent proxy support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tuntap.html">Universal TUN/TAP device driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../udplite.html">The UDP-Lite protocol (RFC 3828)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../vrf.html">Virtual Routing and Forwarding (VRF)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../vxlan.html">Virtual eXtensible Local Area Networking documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x25-iface.html">Packet Layer to Device Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x25-iface.html#device-driver-to-packet-layer">Device Driver to Packet Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x25-iface.html#requirements-for-the-device-driver">Requirements for the device driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../x25.html">Linux X.25 Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../xfrm_device.html">XFRM device - offloading the IPsec computations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../xfrm_proc.html">XFRM proc - /proc/net/xfrm_* files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../xfrm_sync.html">XFRM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../xfrm_sysctl.html">XFRM Syscall</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mhi/index.html">MHI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../arch.html">CPU Architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../index.html">Linux Networking Documentation</a> &raquo;</li>
        
          <li><a href="../../../index.html">Hardware Device Drivers</a> &raquo;</li>
        
          <li><a href="../../index.html">Ethernet Device Drivers</a> &raquo;</li>
        
          <li><a href="index.html">DPAA2 Documentation</a> &raquo;</li>
        
      <li>DPAA2 Switch driver</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../_sources/networking/device_drivers/ethernet/freescale/dpaa2/switch-driver.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dpaa2-switch-driver">
<h1>DPAA2 Switch driver<a class="headerlink" href="#dpaa2-switch-driver" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Copyright</dt>
<dd class="field-odd"><p>© 2021 NXP</p>
</dd>
</dl>
<p>The DPAA2 Switch driver probes on the Datapath Switch (DPSW) object which can
be instantiated on the following DPAA2 SoCs and their variants: LS2088A and
LX2160A.</p>
<p>The driver uses the switch device driver model and exposes each switch port as
a network interface, which can be included in a bridge or used as a standalone
interface. Traffic switched between ports is offloaded into the hardware.</p>
<p>The DPSW can have ports connected to DPNIs or to DPMACs for external access.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  [ethA]     [ethB]      [ethC]     [ethD]     [ethE]     [ethF]
     :          :          :          :          :          :
     :          :          :          :          :          :
[dpaa2-eth]  [dpaa2-eth]  [              dpaa2-switch              ]
     :          :          :          :          :          :        kernel
=============================================================================
     :          :          :          :          :          :        hardware
  [DPNI]      [DPNI]     [============= DPSW =================]
     |          |          |          |          |          |
     |           ----------           |       [DPMAC]    [DPMAC]
      -------------------------------            |          |
                                                 |          |
                                               [PHY]      [PHY]
</pre></div>
</div>
<div class="section" id="creating-an-ethernet-switch">
<h2>Creating an Ethernet Switch<a class="headerlink" href="#creating-an-ethernet-switch" title="Permalink to this headline">¶</a></h2>
<p>The dpaa2-switch driver probes on DPSW devices found on the fsl-mc bus. These
devices can be either created statically through the boot time configuration
file - DataPath Layout (DPL) - or at runtime using the DPAA2 object APIs
(incorporated already into the restool userspace tool).</p>
<p>At the moment, the dpaa2-switch driver imposes the following restrictions on
the DPSW object that it will probe:</p>
<blockquote>
<div><ul>
<li><p>The minimum number of FDBs should be at least equal to the number of switch
interfaces. This is necessary so that separation of switch ports can be
done, ie when not under a bridge, each switch port will have its own FDB.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fsl_dpaa2_switch dpsw.0: The number of FDBs is lower than the number of ports, cannot probe
</pre></div>
</div>
</li>
<li><p>Both the broadcast and flooding configuration should be per FDB. This
enables the driver to restrict the broadcast and flooding domains of each
FDB depending on the switch ports that are sharing it (aka are under the
same bridge).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fsl_dpaa2_switch dpsw.0: Flooding domain is not per FDB, cannot probe
fsl_dpaa2_switch dpsw.0: Broadcast domain is not per FDB, cannot probe
</pre></div>
</div>
</li>
<li><p>The control interface of the switch should not be disabled
(DPSW_OPT_CTRL_IF_DIS not passed as a create time option). Without the
control interface, the driver is not capable to provide proper Rx/Tx traffic
support on the switch port netdevices.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fsl_dpaa2_switch dpsw.0: Control Interface is disabled, cannot probe
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>Besides the configuration of the actual DPSW object, the dpaa2-switch driver
will need the following DPAA2 objects:</p>
<blockquote>
<div><ul class="simple">
<li><p>1 DPMCP - A Management Command Portal object is needed for any interraction
with the MC firmware.</p></li>
<li><p>1 DPBP - A Buffer Pool is used for seeding buffers intended for the Rx path
on the control interface.</p></li>
<li><p>Access to at least one DPIO object (Software Portal) is needed for any
enqueue/dequeue operation to be performed on the control interface queues.
The DPIO object will be shared, no need for a private one.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="switching-features">
<h2>Switching features<a class="headerlink" href="#switching-features" title="Permalink to this headline">¶</a></h2>
<p>The driver supports the configuration of L2 forwarding rules in hardware for
port bridging as well as standalone usage of the independent switch interfaces.</p>
<p>The hardware is not configurable with respect to VLAN awareness, thus any DPAA2
switch port should be used only in usecases with a VLAN aware bridge:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ip link add dev br0 type bridge vlan_filtering 1

$ ip link add dev br1 type bridge
$ ip link set dev ethX master br1
Error: fsl_dpaa2_switch: Cannot join a VLAN-unaware bridge
</pre></div>
</div>
<p>Topology and loop detection through STP is supported when <code class="docutils literal notranslate"><span class="pre">stp_state</span> <span class="pre">1</span></code> is
used at bridge create</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ip link add dev br0 type bridge vlan_filtering 1 stp_state 1
</pre></div>
</div>
<p>L2 FDB manipulation (add/delete/dump) is supported.</p>
<p>HW FDB learning can be configured on each switch port independently through
bridge commands. When the HW learning is disabled, a fast age procedure will be
run and any previously learnt addresses will be removed.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ bridge link set dev ethX learning off
$ bridge link set dev ethX learning on
</pre></div>
</div>
<p>Restricting the unknown unicast and multicast flooding domain is supported, but
not independently of each other:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ip link set dev ethX type bridge_slave flood off mcast_flood off
$ ip link set dev ethX type bridge_slave flood off mcast_flood on
Error: fsl_dpaa2_switch: Cannot configure multicast flooding independently of unicast.
</pre></div>
</div>
<p>Broadcast flooding on a switch port can be disabled/enabled through the brport sysfs:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ echo 0 &gt; /sys/bus/fsl-mc/devices/dpsw.Y/net/ethX/brport/broadcast_flood
</pre></div>
</div>
</div>
<div class="section" id="offloads">
<h2>Offloads<a class="headerlink" href="#offloads" title="Permalink to this headline">¶</a></h2>
<div class="section" id="routing-actions-redirect-trap-drop">
<h3>Routing actions (redirect, trap, drop)<a class="headerlink" href="#routing-actions-redirect-trap-drop" title="Permalink to this headline">¶</a></h3>
<p>The DPAA2 switch is able to offload flow-based redirection of packets making
use of ACL tables. Shared filter blocks are supported by sharing a single ACL
table between multiple ports.</p>
<p>The following flow keys are supported:</p>
<blockquote>
<div><ul class="simple">
<li><p>Ethernet: dst_mac/src_mac</p></li>
<li><p>IPv4: dst_ip/src_ip/ip_proto/tos</p></li>
<li><p>VLAN: vlan_id/vlan_prio/vlan_tpid/vlan_dei</p></li>
<li><p>L4: dst_port/src_port</p></li>
</ul>
</div></blockquote>
<p>Also, the matchall filter can be used to redirect the entire traffic received
on a port.</p>
<p>As per flow actions, the following are supported:</p>
<blockquote>
<div><ul class="simple">
<li><p>drop</p></li>
<li><p>mirred egress redirect</p></li>
<li><p>trap</p></li>
</ul>
</div></blockquote>
<p>Each ACL entry (filter) can be setup with only one of the listed
actions.</p>
<p>Example 1: send frames received on eth4 with a SA of 00:01:02:03:04:05 to the
CPU:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tc qdisc add dev eth4 clsact
$ tc filter add dev eth4 ingress flower src_mac 00:01:02:03:04:05 skip_sw action trap
</pre></div>
</div>
<p>Example 2: drop frames received on eth4 with VID 100 and PCP of 3:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tc filter add dev eth4 ingress protocol 802.1q flower skip_sw vlan_id 100 vlan_prio 3 action drop
</pre></div>
</div>
<p>Example 3: redirect all frames received on eth4 to eth1:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tc filter add dev eth4 ingress matchall action mirred egress redirect dev eth1
</pre></div>
</div>
<p>Example 4: Use a single shared filter block on both eth5 and eth6:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tc qdisc add dev eth5 ingress_block 1 clsact
$ tc qdisc add dev eth6 ingress_block 1 clsact
$ tc filter add block 1 ingress flower dst_mac 00:01:02:03:04:04 skip_sw \
        action trap
$ tc filter add block 1 ingress protocol ipv4 flower src_ip 192.168.1.1 skip_sw \
        action mirred egress redirect dev eth3
</pre></div>
</div>
<div class="section" id="mirroring">
<h4>Mirroring<a class="headerlink" href="#mirroring" title="Permalink to this headline">¶</a></h4>
<p>The DPAA2 switch supports only per port mirroring and per VLAN mirroring.
Adding mirroring filters in shared blocks is also supported.</p>
<p>When using the tc-flower classifier with the 802.1q protocol, only the
‘’vlan_id’’ key will be accepted. Mirroring based on any other fields from the
802.1q protocol will be rejected:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tc qdisc add dev eth8 ingress_block 1 clsact
$ tc filter add block 1 ingress protocol 802.1q flower skip_sw vlan_prio 3 action mirred egress mirror dev eth6
Error: fsl_dpaa2_switch: Only matching on VLAN ID supported.
We have an error talking to the kernel
</pre></div>
</div>
<p>If a mirroring VLAN filter is requested on a port, the VLAN must to be
installed on the switch port in question either using ‘’bridge’’ or by creating
a VLAN upper device if the switch port is used as a standalone interface:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tc qdisc add dev eth8 ingress_block 1 clsact
$ tc filter add block 1 ingress protocol 802.1q flower skip_sw vlan_id 200 action mirred egress mirror dev eth6
Error: VLAN must be installed on the switch port.
We have an error talking to the kernel

$ bridge vlan add vid 200 dev eth8
$ tc filter add block 1 ingress protocol 802.1q flower skip_sw vlan_id 200 action mirred egress mirror dev eth6

$ ip link add link eth8 name eth8.200 type vlan id 200
$ tc filter add block 1 ingress protocol 802.1q flower skip_sw vlan_id 200 action mirred egress mirror dev eth6
</pre></div>
</div>
<p>Also, it should be noted that the mirrored traffic will be subject to the same
egress restrictions as any other traffic. This means that when a mirrored
packet will reach the mirror port, if the VLAN found in the packet is not
installed on the port it will get dropped.</p>
<p>The DPAA2 switch supports only a single mirroring destination, thus multiple
mirror rules can be installed but their ‘’to’’ port has to be the same:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ tc filter add block 1 ingress protocol 802.1q flower skip_sw vlan_id 200 action mirred egress mirror dev eth6
$ tc filter add block 1 ingress protocol 802.1q flower skip_sw vlan_id 100 action mirred egress mirror dev eth7
Error: fsl_dpaa2_switch: Multiple mirror ports not supported.
We have an error talking to the kernel
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../gianfar.html" class="btn btn-neutral float-right" title="The Gianfar Ethernet Driver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="mac-phy-support.html" class="btn btn-neutral float-left" title="DPAA2 MAC / PHY support" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright The kernel development community.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>